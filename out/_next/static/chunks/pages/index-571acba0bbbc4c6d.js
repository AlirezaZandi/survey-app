(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(8202)}])},8202:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return O},vazir:function(){return l()}});var n=s(5893),i=s(6017),l=s.n(i),a=s(9008),r=s.n(a),o=s(7294),c=s(9941),u=s.n(c);let d=(e,t)=>{let{label:s,className:i,onChange:l,value:a}=e;return(0,n.jsxs)("p",{className:u().inputContainer,children:[(0,n.jsx)("input",{type:"text",autoComplete:"name",name:"size",id:"size_1",className:"".concat(u().input," ").concat(i),placeholder:s,value:a,onChange:e=>l(e.target.value),ref:t}),(0,n.jsx)("label",{htmlFor:"size_1",className:u().label,children:s})]})},_=(0,o.forwardRef)(d),p={greeting:{title:"سلام :)",description:"توی این نظر سنجی چندتا سوال کوتاه از شما داریم ممنون میشیم جواب بدید‌:)"},ending:{description:"نظر سنجی تمام شد‌:)",title:"تموم"},questions:[{id:"1",type:"text",questionText:"نام شما؟",required:!0,defaultValue:"",value:""},{id:"2",type:"multiChoice",questionText:"کدوم گزینه ها؟",required:!1,options:["گزینه ۱","گزینه ۲","گزینه ۳"],defaultValue:[],value:[]},{id:"3",type:"singleChoice",questionText:"کدوم؟کدوم؟کدوم؟کدوم؟کدوم؟کدوم؟کدوم؟کدوم؟کدوم؟کدوم؟",required:!0,options:["گزینه ۱","گزینه ۲","گزینه ۳"],defaultValue:"",value:""},{id:"4",type:"score",questionText:"فیدبک؟؟؟",required:!0,defaultValue:0,min:0,max:5,value:0}]};var h=s(2037),x=s.n(h),m=s(8708),v=s.n(m);let y=e=>{let{label:t,className:s,size:i="md",onClick:l,disable:a,type:r}=e;return(0,n.jsx)("button",{type:r||"button",onClick:e=>{a||null==l||l(e)},className:"".concat(v().btn," ").concat(s," ").concat("sm"===i&&v().small," ").concat(a&&v().disable),children:t})},j=e=>{let{onStartClick:t}=e;return(0,n.jsxs)("article",{className:x().greeting,children:[(0,n.jsx)("header",{children:(0,n.jsx)("h1",{className:x().title,children:p.greeting.title})}),(0,n.jsx)("p",{className:x().description,children:p.greeting.description}),(0,n.jsx)("footer",{className:x().start,children:(0,n.jsx)(y,{onClick:t,label:"شروع"})})]})};var g=s(826),f=s.n(g);let b=e=>{let{value:t}=e;return(0,n.jsxs)("div",{className:f().ProgressContainer,children:[(0,n.jsxs)("label",{htmlFor:"file",children:["شما به ",t>=100?100:t,"٪ سوالات پاسخ داده اید"]}),(0,n.jsx)("progress",{className:f().progress,id:"file",max:"100",value:t})]})};var N=s(4523),C=s.n(N);let q=e=>{let{questionNumber:t,questionText:s,onSubmit:i,disableNextButton:l,children:a,display:r=!0}=e;return r?(0,n.jsxs)("form",{className:C().questionForm,onSubmit:e=>{e.preventDefault(),null==i||i()},children:[(0,n.jsxs)("fieldset",{className:C().question,children:[(0,n.jsxs)("legend",{className:C().title,children:[t,". ",s]}),a]}),(0,n.jsx)(y,{label:"سوال بعد",className:C().submitButton,disable:l,type:"submit"})]}):null};var w=s(1666),k=s.n(w);let L=e=>{let{onDownClick:t,onUpClick:s,disableDownButton:i}=e;return(0,n.jsxs)("div",{className:k().nav,children:[(0,n.jsx)(y,{onClick:s,size:"sm",label:(0,n.jsx)("svg",{height:"9",width:"14",fill:"white",children:(0,n.jsx)("path",{d:"M12.293.293l1.414 1.414L7 8.414.293 1.707 1.707.293 7 5.586z"})}),className:k().navButtonLeft,disable:i}),(0,n.jsx)(y,{onClick:t,size:"sm",label:(0,n.jsx)("svg",{height:"9",width:"14",fill:"white",children:(0,n.jsx)("path",{d:"M11.996 8.121l1.414-1.414L6.705 0 0 6.707l1.414 1.414 5.291-5.293z"})}),className:k().navButtonRight})]})};var z=s(5449),B=s.n(z);let F=e=>{let{}=e;return(0,n.jsxs)("article",{className:B().greeting,children:[(0,n.jsx)("header",{children:(0,n.jsx)("h1",{className:B().title,children:p.ending.title})}),(0,n.jsx)("p",{className:B().description,children:p.ending.description})]})};var E=s(3454),T=s(5820),P=s(7536);let S=e=>{let[t,s]=(0,o.useState)(M.start),[n,i]=(0,o.useState)(0),{control:l,formState:a,handleSubmit:r,watch:c}=(0,P.cI)({defaultValues:{questions:e},mode:"all"}),u=e.length,d=c().questions[n],_=!(null==a?void 0:a.isValid);console.log(a);let p=()=>s(M.inProcess),h=()=>{_||(u===n+1?(s(M.end),r(m)()):i(e=>e+1))},x=()=>{0===n?s(M.start):i(e=>e-1)},m=e=>{console.log(e)};return{step:t,currentQuestion:n,questionsCount:u,formState:a,control:l,nextQuestion:h,startSurvey:p,previousQuestion:x,allowNextQuestion:_,currentQuestionData:d}},M={start:"start",inProcess:"inProcess",end:"end"};var H=s(5335),V=s.n(H),R=s(7642),X=s.n(R);let Q=e=>{let{options:t,multiple:s,value:i,onChange:l}=e,a=e=>s?i.includes(e):i===e,r=e=>{s?i.includes(e)?l(i.filter(t=>t!==e)):l([...i,e]):l(e)};return(0,n.jsx)("div",{className:X().container,children:t.map((e,t)=>(0,n.jsxs)(E.E.button,{whileTap:{scale:[1.05,1.08]},animate:{scale:1},transition:{bounce:1,duration:.1,type:"spring"},type:"button",className:"".concat(X().option," ").concat(a(e.value)&&X().selected),onClick:()=>r(e.value),children:[(0,n.jsx)("span",{className:"".concat(X().optionNumber),children:t+1}),e.label]},e.label))})};var A=s(7614),G=s.n(A);let I=e=>{let{filled:t,halfFilled:s,onClick:i}=e;return(0,n.jsx)("div",{onClick:i,className:G().star,children:t||s?(0,n.jsx)("svg",{focusable:"false","aria-hidden":"true",width:"100",height:"100",fill:t?"white":"#00000040",viewBox:"0 0 24 24","data-testid":"StarIcon",children:(0,n.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}):(0,n.jsx)("svg",{focusable:"false","aria-hidden":"true",viewBox:"0 0 24 24",width:"100",height:"100",fill:"white","data-testid":"StarBorderIcon",children:(0,n.jsx)("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"})})})},K=e=>{let{max:t,min:s,onChange:i,value:l}=e;return(0,n.jsx)("div",{className:G().container,children:[...Array(t-s+1)].map((e,t)=>(0,n.jsx)(E.E.div,{whileTap:{scale:1.2},animate:{scale:1},transition:{bounce:1,duration:.1,type:"spring"},children:(0,n.jsx)(I,{filled:l>t,onClick:()=>i(t+s)})},t))})},D=e=>{let{step:t,startSurvey:s,currentQuestionData:i,nextQuestion:l,previousQuestion:a,allowNextQuestion:r,questionsCount:o,currentQuestion:c,control:u,formState:d}=S(p.questions),h=e=>{let{field:t,fieldState:s,formState:l}=e;switch(null==i?void 0:i.type){case"text":return(0,n.jsx)(_,{value:i.value||"",onChange:t.onChange,name:t.name,ref:t.ref});case"singleChoice":return(0,n.jsx)(Q,{value:i.value||"",onChange:t.onChange,options:i.options.map(e=>({value:e,label:e}))});case"multiChoice":return(0,n.jsx)(Q,{value:i.value||[],multiple:!0,onChange:t.onChange,options:i.options.map(e=>({value:e,label:e}))});case"score":return(0,n.jsx)(K,{value:i.value||0,min:1,max:5,onChange:t.onChange});default:throw Error("question type is not supported")}},x={visible:{opacity:1},hidden:{opacity:0}};return(0,n.jsxs)("section",{className:V().survey,children:[(0,n.jsxs)(E.E.div,{className:V().container,children:[t===M.start&&(0,n.jsx)(j,{onStartClick:s}),t===M.inProcess&&p.questions.map(e=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(T.M,{mode:"popLayout",children:e.id===i.id&&(0,n.jsx)(E.E.div,{variants:x,initial:{opacity:0,y:700},exit:{opacity:0,y:-700},animate:{opacity:1,y:0},transition:{duration:.7},children:(0,n.jsx)(q,{questionNumber:c+1,questionText:null==i?void 0:i.questionText,disableNextButton:r,onSubmit:l,children:(0,n.jsx)(P.Qr,{control:u,name:"questions.".concat(c,".value"),render:h,rules:{required:{value:i.required,message:"جواب به این سوال اجباریه!"}}})})},e.id)})})),t===M.end&&(0,n.jsx)(F,{})]}),t===M.inProcess&&(0,n.jsxs)("footer",{className:V().footer,children:[(0,n.jsx)(L,{onUpClick:l,onDownClick:a,disableDownButton:r}),(0,n.jsx)(b,{value:Math.round(c/o*100)})]})]})};function O(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"Survey"}),(0,n.jsx)("meta",{name:"description",content:"Survey App"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)("main",{className:l().className,children:(0,n.jsx)(D,{})})]})}},5449:function(e){e.exports={greeting:"styles_greeting__UkVqz",title:"styles_title__PbMRu",description:"styles_description__vsXpb",start:"styles_start__BGwhQ"}},2037:function(e){e.exports={greeting:"styles_greeting__4TWw4",title:"styles_title__zAXky",description:"styles_description__FLHuu",start:"styles_start__itHKE"}},1666:function(e){e.exports={nav:"styles_nav__g94ny",navButtonRight:"styles_navButtonRight__cHj2p",navButtonLeft:"styles_navButtonLeft__JWFHi"}},826:function(e){e.exports={ProgressContainer:"styles_ProgressContainer__d1zn7",progress:"styles_progress__6poa_"}},4523:function(e){e.exports={questionForm:"styles_questionForm__wmqkX",question:"styles_question__yMl6F",title:"styles_title__LRe9L",scoreContainer:"styles_scoreContainer__q1aLn",star:"styles_star__j5xTA",option:"styles_option__p1kKj",selected:"styles_selected__vOew7",optionNumber:"styles_optionNumber__q42_F"}},7642:function(e){e.exports={container:"styles_container__2GxFT",option:"styles_option__WHaZM",selected:"styles_selected__sPHc4",optionNumber:"styles_optionNumber__mxzZF"}},7614:function(e){e.exports={container:"styles_container__CK_hr",star:"styles_star__gGhNi"}},5335:function(e){e.exports={survey:"styles_survey__HuEY6",container:"styles_container__G5CSQ",footer:"styles_footer__IaE9j"}},8708:function(e){e.exports={btn:"style_btn__7U6aX",disable:"style_disable__oCFLy",small:"style_small__Qgdco"}},9941:function(e){e.exports={inputContainer:"style_inputContainer__sQfBd",input:"style_input__y_lsK",label:"style_label__gdhYy"}}},function(e){e.O(0,[172,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);